<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Smart Fridge ‚Äî Gas Detection Dashboard</title>
  <style>
    /* ========== DESIGN TOKENS ========== */
    :root{
      --bg-light: #f9fafb;
      --bg-lighter: #f3f4f6;
      --card: #ffffff;
      --text-primary: #1f2937;
      --text-secondary: #6b7280;
      --text-tertiary: #9ca3af;
      
      --accent-primary: #4f46e5;
      --accent-light: #e0e7ff;
      --accent-lighter: #f3f4f8;
      
      --success: #10b981;
      --success-light: #d1fae5;
      
      --warning: #f59e0b;
      --warning-light: #fef3c7;
      
      --danger: #ef4444;
      --danger-light: #fee2e2;
      
      /* Shadows - soft and elegant */
      --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.05);
      --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
      --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
      --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.1);
      --shadow-hover: 0 14px 28px rgba(79, 70, 229, 0.15);
      
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-full: 999px;
      
      --gap-xs: 8px;
      --gap-sm: 12px;
      --gap-md: 16px;
      --gap-lg: 20px;
      --gap-xl: 24px;
      
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
      letter-spacing: -0.3px;
    }

    /* ========== BASE STYLES ========== */
    * {
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 50%, #ede9fe 100%);
      color: var(--text-primary);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* ========== CONTAINER ========== */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 32px 20px;
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--gap-lg);
    }

    /* ========== TOP NAVIGATION ========== */
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--gap-lg);
      padding: 24px 0;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      margin-bottom: 8px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: var(--gap-md);
    }

    .logo {
      width: 52px;
      height: 52px;
      border-radius: var(--radius-md);
      background: linear-gradient(135deg, var(--accent-primary) 0%, #7c3aed 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 18px;
      box-shadow: var(--shadow-md);
      flex-shrink: 0;
    }

    .brand > div:last-child {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-primary);
      letter-spacing: -0.5px;
    }

    .subtitle {
      font-size: 13px;
      color: var(--text-tertiary);
      font-weight: 500;
    }

    .topbar > div:last-child {
      text-align: right;
    }

    .topbar > div:last-child > div:first-child {
      font-weight: 600;
      font-size: 15px;
      color: var(--text-primary);
    }

    /* ========== TOPBAR RIGHT SECTION ========== */
    .topbar-right {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 16px;
      flex: 1;
      flex-shrink: 0;
      min-width: 0;
    }

    .search-wrapper {
      display: flex;
      align-items: center;
      gap: 10px;
      justify-content: flex-end;
      min-width: 0;
      flex-shrink: 0;
    }

    .welcome-text {
      display: flex;
      flex-direction: column;
      gap: 2px;
      text-align: right;
      white-space: nowrap;
      justify-content: center;
      align-items: flex-end;
      line-height: 1.4;
    }

    .welcome-text > div:first-child {
      font-weight: 600;
      font-size: 15px;
      color: var(--text-primary);
      line-height: 1.3;
    }
    
    .welcome-text .subtitle {
      font-size: 12px;
      color: var(--text-muted);
      line-height: 1.3;
    }

    .search-btn {
      position: relative;
      width: 40px;
      height: 40px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: var(--radius-full);
      padding: 0;
      background:
        radial-gradient(circle at 0 0, rgba(224, 231, 255, 0.45), transparent 55%),
        linear-gradient(135deg, rgba(79, 70, 229, 0.98), rgba(124, 58, 237, 0.98));
      color: #f9fafb;
      border: 1px solid rgba(255, 255, 255, 0.5);
      box-shadow: 0 10px 24px rgba(15, 23, 42, 0.45);
      backdrop-filter: blur(14px) saturate(160%);
      -webkit-backdrop-filter: blur(14px) saturate(160%);
      cursor: pointer;
      transition:
        transform 200ms cubic-bezier(0.22, 0.61, 0.36, 1),
        box-shadow 220ms cubic-bezier(0.22, 0.61, 0.36, 1),
        background 260ms ease,
        outline-color 150ms ease;
      white-space: nowrap;
      flex-shrink: 0;
      align-self: center;
      animation: searchPulse 2.3s ease-in-out infinite;
    }

    .search-btn:hover {
      transform: translateY(-1px) scale(1.05) rotate(-3deg);
      box-shadow: 0 16px 32px rgba(79, 70, 229, 0.4);
    }

    .search-btn:active {
      transform: translateY(0) scale(0.95) rotate(0deg);
      box-shadow: 0 8px 18px rgba(79, 70, 229, 0.5);
      transition-duration: 120ms;
    }

    .search-btn:focus-visible {
      outline: 2px solid rgba(191, 219, 254, 1);
      outline-offset: 3px;
    }

    .search-container {
      display: flex;
      align-items: center;
      flex-shrink: 1;
      max-width: 0;
      opacity: 0;
      transform: translateX(16px);
      pointer-events: none;
      transition:
        max-width 340ms cubic-bezier(0.4, 0, 0.2, 1),
        opacity 260ms ease,
        transform 340ms cubic-bezier(0.4, 0, 0.2, 1);
    }

    .search-container.is-open {
      max-width: 320px;
      opacity: 1;
      transform: translateX(0);
      pointer-events: auto;
    }

    .search-input-wrapper {
      display: flex;
      align-items: center;
      gap: 8px;
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.6), rgba(30, 64, 175, 0.45));
      padding: 8px 14px;
      border-radius: var(--radius-full);
      box-shadow: 0 18px 45px rgba(15, 23, 42, 0.55);
      border: 1px solid rgba(255, 255, 255, 0.35);
      backdrop-filter: blur(18px) saturate(170%);
      -webkit-backdrop-filter: blur(18px) saturate(170%);
      position: relative;
      overflow: hidden;
      min-width: 0;
    }

    .search-input-wrapper::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg, rgba(79, 70, 229, 0.7), rgba(124, 58, 237, 0.5), rgba(59, 130, 246, 0.35));
      opacity: 0;
      mix-blend-mode: screen;
      transition: opacity 260ms ease;
      pointer-events: none;
    }

    .search-input-wrapper:focus-within::before {
      opacity: 1;
    }

    .search-input-wrapper:focus-within {
      box-shadow:
        0 0 0 1px rgba(129, 140, 248, 0.7),
        0 20px 52px rgba(79, 70, 229, 0.55);
    }

    .search-input-icon {
      font-size: 14px;
      color: rgba(224, 231, 255, 0.9);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      animation: searchIconWiggle 2.8s ease-in-out infinite;
      transform-origin: center;
    }

    .search-input-field {
      background: transparent;
      border: none;
      outline: none;
      font-size: 13px;
      color: #e5e7eb;
      font-family: inherit;
      font-weight: 500;
      width: 100%;
      min-width: 0;
    }

    .search-input-field::placeholder {
      color: rgba(209, 213, 219, 0.6);
      opacity: 0;
      transition:
        opacity 280ms ease,
        color 280ms ease;
    }

    .search-container.is-open .search-input-field::placeholder {
      opacity: 1;
    }

    .search-input-field:focus::placeholder {
      color: rgba(224, 231, 255, 0.9);
    }

    .search-clear-btn {
      border: none;
      background: transparent;
      color: rgba(209, 213, 219, 0.8);
      font-size: 14px;
      cursor: pointer;
      padding: 2px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition:
        transform 220ms cubic-bezier(0.4, 0, 0.2, 1),
        color 200ms ease,
        box-shadow 200ms ease,
        background-color 200ms ease;
    }

    .search-clear-btn:hover {
      color: #f9fafb;
      background: rgba(79, 70, 229, 0.7);
      box-shadow: 0 0 0 1px rgba(191, 219, 254, 0.75);
      transform: rotate(90deg) scale(1.06);
    }

    .search-clear-btn:active {
      transform: rotate(135deg) scale(0.96);
      box-shadow: none;
    }

    .search-clear-btn:focus-visible {
      outline: 2px solid rgba(191, 219, 254, 1);
      outline-offset: 2px;
    }

    /* ========== SUMMARY WIDGETS ========== */
    .summary {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--gap-md);
      margin-bottom: var(--gap-md);
    }

    .widget {
      background: linear-gradient(135deg, var(--card) 0%, rgba(79, 70, 229, 0.02) 100%);
      border-radius: var(--radius-lg);
      padding: 20px;
      box-shadow: var(--shadow-md);
      border: 1.5px solid rgba(79, 70, 229, 0.08);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--gap-md);
      transition: all 400ms cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .widget::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--accent-primary), #7c3aed);
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 400ms ease;
    }

    .widget:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-hover);
      border-color: rgba(79, 70, 229, 0.15);
      background: linear-gradient(135deg, var(--card) 0%, rgba(79, 70, 229, 0.05) 100%);
    }

    .widget:hover::before {
      transform: scaleX(1);
    }

    .widget .left {
      display: flex;
      flex-direction: column;
      gap: var(--gap-xs);
    }

    .widget .num {
      font-size: 28px;
      font-weight: 700;
      background: linear-gradient(135deg, var(--accent-primary), #7c3aed);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .widget .label {
      font-size: 13px;
      color: var(--text-secondary);
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .widget > div:last-child {
      font-size: 32px;
      opacity: 0.8;
      transition: transform 400ms ease;
    }

    .widget:hover > div:last-child {
      transform: scale(1.1);
    }

    /* ========== SECTION HEADER ========== */
    .section {
      background: transparent;
      display: grid;
      gap: var(--gap-lg);
    }

    .section > div:first-child {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
    }

    .section h3 {
      margin: 0;
      font-size: 24px;
      font-weight: 800;
      color: var(--text-primary);
      letter-spacing: -0.5px;
      position: relative;
      display: inline-block;
    }

    .section h3::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 0;
      width: 40px;
      height: 3px;
      background: linear-gradient(90deg, var(--accent-primary), #7c3aed);
      border-radius: var(--radius-full);
    }

    .section > div:first-child > div:last-child {
      color: var(--text-tertiary);
      font-size: 13px;
      font-weight: 500;
    }

    /* ========== PRODUCTS GRID ========== */
    .grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--gap-lg);
      animation: fadeIn 600ms ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.95);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-4px); }
    }

    @keyframes searchPulse {
      0%, 100% {
        transform: translateY(0) scale(1);
        box-shadow: 0 10px 24px rgba(15, 23, 42, 0.45);
      }
      50% {
        transform: translateY(-1px) scale(1.04);
        box-shadow: 0 18px 40px rgba(79, 70, 229, 0.6);
      }
    }

    @keyframes searchIconWiggle {
      0%, 100% {
        transform: translateX(0) rotate(0deg);
      }
      50% {
        transform: translateX(1px) rotate(-8deg);
      }
    }

    /* ========== PRODUCT CARDS ========== */
    .card {
      background: linear-gradient(135deg, var(--card) 0%, rgba(79, 70, 229, 0.01) 100%);
      border-radius: var(--radius-lg);
      padding: 18px;
      box-shadow: var(--shadow-md);
      border: 1.5px solid rgba(79, 70, 229, 0.08);
      display: flex;
      gap: var(--gap-md);
      align-items: flex-start;
      transition: all 500ms cubic-bezier(0.34, 1.56, 0.64, 1);
      position: relative;
      overflow: hidden;
    }

    .card::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(79, 70, 229, 0.03), transparent);
      opacity: 0;
      transition: opacity 400ms ease;
      pointer-events: none;
    }

    .card:hover {
      transform: translateY(-12px) scale(1.02);
      box-shadow: var(--shadow-xl);
      border-color: rgba(79, 70, 229, 0.25);
      background: linear-gradient(135deg, var(--card) 0%, rgba(79, 70, 229, 0.04) 100%);
    }

    .card:hover::after {
      opacity: 1;
    }

    .card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
      transform: translateX(-100%);
      transition: transform 600ms cubic-bezier(0.4, 0, 0.2, 1);
      pointer-events: none;
    }

    .card:hover::before {
      transform: translateX(100%);
    }

    /* ========== THUMBNAIL ========== */
    .thumb {
      width: 120px;
      height: 120px;
      border-radius: var(--radius-lg);
      overflow: hidden;
      flex-shrink: 0;
      background: linear-gradient(135deg, var(--accent-lighter) 0%, #f3f4f8 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid rgba(79, 70, 229, 0.1);
      box-shadow: var(--shadow-sm);
      transition: all 400ms ease;
    }

    .card:hover .thumb {
      border-color: rgba(79, 70, 229, 0.2);
      box-shadow: var(--shadow-md);
    }

    .thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    /* ========== METADATA ========== */
    .meta {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: var(--gap-sm);
      min-width: 0;
    }

    .meta .row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: var(--gap-md);
    }

    .product-name {
      font-weight: 800;
      font-size: 16px;
      color: var(--text-primary);
      letter-spacing: -0.3px;
      background: linear-gradient(135deg, var(--text-primary), #374151);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .rfid {
      font-size: 12px;
      color: var(--text-tertiary);
      font-weight: 500;
      margin-top: 2px;
    }

    .gas-info {
      display: flex;
      gap: var(--gap-lg);
      font-size: 13px;
      color: var(--text-secondary);
      font-weight: 500;
    }

    .gas-info > div {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .gas-info strong {
      color: var(--text-primary);
      font-weight: 600;
    }

    .qty {
      font-weight: 700;
      color: var(--accent-primary);
      font-size: 14px;
      background: linear-gradient(135deg, var(--accent-light), #e0e7ff);
      padding: 4px 12px;
      border-radius: var(--radius-full);
      display: inline-block;
      width: fit-content;
    }

    /* ========== STATUS BADGE ========== */
    .status {
      display: inline-flex;
      align-items: center;
      gap: var(--gap-xs);
      font-weight: 600;
      font-size: 12px;
      padding: 8px 14px;
      border-radius: var(--radius-full);
      color: white;
      text-transform: uppercase;
      letter-spacing: 0.3px;
      box-shadow: var(--shadow-sm);
      transition: all 300ms ease;
      white-space: nowrap;
    }

    .status.fresh {
      background: linear-gradient(135deg, var(--success), #059669);
      color: white;
    }

    .status.near {
      background: linear-gradient(135deg, var(--warning), #d97706);
      color: white;
    }

    .status.expired {
      background: linear-gradient(135deg, var(--danger), #dc2626);
      color: white;
    }

    .status::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.15);
      border-radius: inherit;
      opacity: 0;
      transition: opacity 300ms ease;
    }

    .card:hover .status {
      transform: scale(1.08);
      box-shadow: var(--shadow-md);
    }

    /* ========== GAS THRESHOLDS DISPLAY ========== */
    .gas-thresholds {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      padding: 10px;
      background: rgba(79, 70, 229, 0.03);
      border-radius: var(--radius-md);
      border: 1px solid rgba(79, 70, 229, 0.1);
    }

    .threshold-info {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 3px;
      padding: 6px;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 6px;
      border: 1px solid rgba(79, 70, 229, 0.08);
    }

    .threshold-label {
      font-size: 11px;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.3px;
    }

    .threshold-value {
      font-size: 12px;
      font-weight: 700;
      color: var(--accent-primary);
    }

    /* ========== PROGRESS BAR ========== */
    .progress {
      height: 8px;
      background: linear-gradient(90deg, #e5e7eb, #f3f4f6);
      border-radius: var(--radius-full);
      overflow: hidden;
      width: 100%;
      margin-top: var(--gap-sm);
      border: 1px solid rgba(0, 0, 0, 0.02);
      position: relative;
    }

    .progress > i {
      display: block;
      height: 100%;
      background: linear-gradient(90deg, var(--accent-primary), #7c3aed);
      width: 0%;
      transition: width 800ms cubic-bezier(0.4, 0, 0.2, 1);
      border-radius: var(--radius-full);
      box-shadow: 0 0 12px rgba(79, 70, 229, 0.3), inset 0 0 8px rgba(255, 255, 255, 0.3);
      position: relative;
    }

    .progress > i::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 2px;
      height: 100%;
      background: rgba(255, 255, 255, 0.5);
      box-shadow: 2px 0 4px rgba(0, 0, 0, 0.1);
    }

    .progress-label {
      font-size: 12px;
      color: var(--text-secondary);
      margin-top: var(--gap-xs);
      font-weight: 500;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    /* ========== SEARCH & FILTER BAR ========== */
    .search-bar {
      display: flex;
      gap: var(--gap-md);
      align-items: center;
      background: var(--card);
      padding: 16px 20px;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-md);
      border: 1px solid rgba(0, 0, 0, 0.03);
    }

    .search-input {
      flex: 1;
      background: transparent;
      border: none;
      outline: none;
      font-size: 14px;
      color: var(--text-primary);
      font-family: inherit;
      font-weight: 500;
    }

    .search-input::placeholder {
      color: var(--text-tertiary);
    }

    .search-input:focus {
      color: var(--accent-primary);
    }

    .search-bar:focus-within {
      border-color: rgba(79, 70, 229, 0.2);
      box-shadow: var(--shadow-lg), inset 0 0 0 2px rgba(79, 70, 229, 0.05);
    }

    .search-icon {
      color: var(--text-tertiary);
      font-size: 18px;
    }

    .filter-btn {
      padding: 10px 18px;
      background: linear-gradient(135deg, var(--accent-primary), #7c3aed);
      color: white;
      border: none;
      border-radius: var(--radius-full);
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
      text-transform: uppercase;
      letter-spacing: 0.3px;
      box-shadow: var(--shadow-sm);
      position: relative;
    }

    .filter-btn:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-lg);
    }

    .filter-btn:active {
      transform: translateY(-1px);
    }

    .filter-tags {
      display: flex;
      gap: var(--gap-xs);
      flex-wrap: wrap;
    }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      background: rgba(79, 70, 229, 0.08);
      color: var(--accent-primary);
      border-radius: var(--radius-full);
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
      border: 1.5px solid rgba(79, 70, 229, 0.15);
      position: relative;
      overflow: hidden;
    }

    .tag::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.2);
      transition: left 600ms ease;
    }

    .tag:hover {
      background: rgba(79, 70, 229, 0.15);
      border-color: rgba(79, 70, 229, 0.3);
      transform: translateY(-2px);
    }

    .tag:hover::before {
      left: 100%;
    }

    .tag.active {
      background: linear-gradient(135deg, var(--accent-primary), #7c3aed);
      color: white;
      border-color: rgba(124, 58, 237, 0.5);
      box-shadow: var(--shadow-md);
    }

    /* ========== EMPTY STATE ========== */
    .empty-state {
      text-align: center;
      padding: 80px 20px;
      color: var(--text-secondary);
      animation: fadeIn 500ms ease;
    }

    .empty-state-icon {
      font-size: 72px;
      margin-bottom: var(--gap-md);
      opacity: 0.7;
      animation: bounce 2s infinite;
    }

    .empty-state-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .empty-state-text {
      font-size: 14px;
      color: var(--text-secondary);
    }

    /* ========== RESPONSIVE DESIGN ========== */
    @media (max-width: 1024px) {
      .container {
        padding: 24px 16px;
      }

      .summary {
        grid-template-columns: repeat(2, 1fr);
        gap: var(--gap-sm);
      }

      .grid {
        grid-template-columns: repeat(2, 1fr);
        gap: var(--gap-md);
      }

      .card {
        padding: 16px;
      }

      .thumb {
        width: 100px;
        height: 100px;
      }
    }

    @media (max-width: 768px) {
      .container {
        padding: 20px 14px;
      }

      .topbar {
        flex-direction: row;
        align-items: center;
        gap: var(--gap-md);
        padding: 20px 0 14px;
        position: relative;
      }

      .topbar > div:last-child {
        align-self: center;
      }

      .search-btn {
        position: fixed;
        top: 12px;
        right: 16px;
        z-index: 40;
      }

      .search-container {
        position: fixed;
        top: 12px;
        left: 12px;
        right: 12px;
        max-width: 100%;
        transform: translateY(-14px);
        justify-content: center;
        z-index: 35;
      }

      .search-container.is-open {
        transform: translateY(0);
      }

      .summary {
        grid-template-columns: repeat(2, 1fr);
        gap: var(--gap-sm);
      }

      .widget {
        padding: 16px;
      }

      .widget .num {
        font-size: 24px;
      }

      .grid {
        grid-template-columns: 1fr;
      }

      .card {
        flex-direction: column;
        text-align: center;
      }

      .thumb {
        width: 100%;
        height: 200px;
      }

      .meta .row {
        flex-direction: column;
        align-items: center;
      }

      .gas-info {
        flex-direction: column;
        gap: var(--gap-xs);
      }

      .progress-label {
        justify-content: center;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 16px 12px;
      }

      .title {
        font-size: 18px;
      }

      .summary {
        grid-template-columns: 1fr;
        gap: var(--gap-xs);
      }

      .widget {
        padding: 14px;
        flex-direction: column;
        text-align: center;
      }

      .widget .left {
        gap: 4px;
      }

      .widget .num {
        font-size: 22px;
      }

      .widget .label {
        font-size: 11px;
      }

      .widget > div:last-child {
        font-size: 28px;
      }

      .section h3 {
        font-size: 18px;
      }

      .section > div:first-child {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--gap-xs);
      }

      .product-name {
        font-size: 15px;
      }

      .qty {
        padding: 4px 10px;
        font-size: 12px;
      }

      .gas-thresholds {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container" id="app">
    <!-- Navigation Bar -->
    <div class="topbar">
      <div class="brand">
        <div class="logo">üßä</div>
        <div>
          <div class="title">Smart Fridge Dashboard</div>
          <div class="subtitle">G.U.Z Gas Detection System</div>
        </div>
      </div>
      <div class="topbar-right">
        <div class="welcome-text">
          <div>Welcome, Kawter</div>
          <div class="subtitle">Real-time Gas Monitoring</div>
        </div>
        <div class="search-wrapper">
          <button 
            id="searchToggleBtn" 
            class="search-btn" 
            type="button"
            aria-label="Open product search"
            aria-expanded="false"
            aria-controls="searchContainer"
          >
            üîç
          </button>
          <div 
            id="searchContainer" 
            class="search-container" 
            aria-hidden="true"
          >
            <div class="search-input-wrapper" role="search" aria-label="Search products by name or RFID">
              <span class="search-input-icon" aria-hidden="true">üîç</span>
              <input 
                type="text" 
                id="searchInput" 
                placeholder="Search products or RFID..." 
                class="search-input-field"
                tabindex="-1"
              />
              <button 
                id="searchClearBtn" 
                class="search-clear-btn" 
                type="button"
                aria-label="Clear search and close"
                tabindex="-1"
              >
                ‚úï
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Summary Widgets -->
    <div class="summary" id="summaryRow">
      <div class="widget">
        <div class="left">
          <div class="label">Total Products</div>
          <div class="num" id="totalProducts">0</div>
        </div>
        <div>üì¶</div>
      </div>

      <div class="widget">
        <div class="left">
          <div class="label">Near Spoiling</div>
          <div class="num" id="expiringSoon">0</div>
        </div>
        <div>‚ö°</div>
      </div>

      <div class="widget">
        <div class="left">
          <div class="label">Spoiled</div>
          <div class="num" id="expiredCount">0</div>
        </div>
        <div>‚ö†Ô∏è</div>
      </div>

      <div class="widget">
        <div class="left">
          <div class="label">Total Quantity</div>
          <div class="num" id="totalQty">0</div>
        </div>
        <div>üßæ</div>
      </div>
    </div>

    <!-- Products Section -->
    <div class="section">
      <div>
        <h3>Gas Detection Monitor</h3>
        <div>Track freshness using G.U.Z (Gas Unit Zone) technology</div>
      </div>

      <!-- Filters Bar (search moved to navbar) -->

      <!-- Filter Tags -->
      <div class="filter-tags" id="filterTags">
        <div class="tag" data-filter="all">All</div>
        <div class="tag" data-filter="fresh">‚úì Fresh</div>
        <div class="tag" data-filter="near">‚ö° Near Spoiling</div>
        <div class="tag" data-filter="expired">‚ö†Ô∏è Spoiled</div>
      </div>

      <!-- Products Grid -->
      <div class="grid" id="cardsGrid">
        <!-- product cards inserted here -->
      </div>

      <!-- Empty State -->
      <div class="empty-state" id="emptyState" style="display: none;">
        <div class="empty-state-icon">üì≠</div>
        <div class="empty-state-title">No Products Found</div>
        <div class="empty-state-text">Try adjusting your search or filter criteria</div>
      </div>
    </div>
  </div>

  <script>
    // === APPLICATION STATE ===
    let allProducts = [];
    let currentFilter = 'all';
    let currentSearch = '';

    // === G.U.Z (GAS UNIT ZONE) DETECTION SYSTEM ===
    // Product-specific gas thresholds for freshness detection
    const PRODUCT_GAS_THRESHOLDS = {
      "milk": { fresh: 15, warning: 45, spoiled: 75, gasType: "Volatile Organic Compounds (VOCs)" },
      "dairy": { fresh: 15, warning: 45, spoiled: 75, gasType: "Volatile Organic Compounds (VOCs)" },
      "cheese": { fresh: 20, warning: 60, spoiled: 85, gasType: "Lactic Acid Gas" },
      "chicken": { fresh: 10, warning: 35, spoiled: 60, gasType: "Ammonia (NH‚ÇÉ)" },
      "meat": { fresh: 10, warning: 35, spoiled: 60, gasType: "Ammonia (NH‚ÇÉ)" },
      "beef": { fresh: 10, warning: 35, spoiled: 60, gasType: "Ammonia (NH‚ÇÉ)" },
      "lettuce": { fresh: 25, warning: 65, spoiled: 90, gasType: "Ethylene (C‚ÇÇH‚ÇÑ)" },
      "vegetables": { fresh: 25, warning: 65, spoiled: 90, gasType: "Ethylene (C‚ÇÇH‚ÇÑ)" },
      "fruits": { fresh: 30, warning: 70, spoiled: 95, gasType: "Ethylene (C‚ÇÇH‚ÇÑ)" },
      "default": { fresh: 25, warning: 60, spoiled: 85, gasType: "Mixed Organic Gases" }
    };

    // === STATIC JSON DATA ===
    const staticProducts = [
      {
        "name": "Tomato",
        "image": "https://png.pngtree.com/png-clipart/20231001/original/pngtree-fruit-fresh-tomato-png-image_13025007.png",
        "rfid": "RFID-00101",
        "depositDate": "2025-11-19",
        "expirationDate": "2025-11-26",
        "quantity": 5,
        "productType": "vegetables",
        "currentGasLevel": 18,
        "gasEmissionRate": 1.5
      },
      {
        "name": "Banana",
        "image": "https://png.pngtree.com/png-clipart/20220716/ourmid/pngtree-banana-yellow-fruit-banana-skewers-png-image_5944324.png",
        "rfid": "RFID-00102",
        "depositDate": "2025-11-17",
        "expirationDate": "2025-11-23",
        "quantity": 3,
        "productType": "fruits",
        "currentGasLevel": 42,
        "gasEmissionRate": 3.2
      },
      {
        "name": "Apple",
        "image": "https://png.pngtree.com/png-vector/20231017/ourmid/pngtree-3d-red-apple-png-with-green-leaf-png-image_10201408.png",
        "rfid": "RFID-00103",
        "depositDate": "2025-11-18",
        "expirationDate": "2025-12-05",
        "quantity": 8,
        "productType": "fruits",
        "currentGasLevel": 15,
        "gasEmissionRate": 0.8
      },
      {
        "name": "Pepper",
        "image": "https://png.pngtree.com/png-clipart/20230428/ourmid/pngtree-free-vector-red-chili-pepper-realistic-single-object-on-blank-white-png-image_6741302.png",
        "rfid": "RFID-00104",
        "depositDate": "2025-11-16",
        "expirationDate": "2025-11-28",
        "quantity": 2,
        "productType": "vegetables",
        "currentGasLevel": 68,
        "gasEmissionRate": 2.1
      }
    ];
    allProducts = [...staticProducts];

    // Escape HTML for security
    function escapeHtml(str) {
      return String(str).replace(/[&<>"']/g, function(m) {
        return {
          '&': '&amp;',
          '<': '&lt;',
          '>': '&gt;',
          '"': '&quot;',
          "'": '&#39;'
        }[m];
      });
    }

    // Get product status based on G.U.Z gas levels
    function getProductStatus(product) {
      const thresholds = PRODUCT_GAS_THRESHOLDS[product.productType?.toLowerCase()] || 
                        PRODUCT_GAS_THRESHOLDS.default;
      const gasLevel = product.currentGasLevel || 0;
      
      // Zone 1: gasLevel < fresh = FRESH
      // Zone 2: fresh <= gasLevel < warning = NEAR SPOILING  
      // Zone 3: gasLevel >= warning = SPOILED
      if (gasLevel >= thresholds.warning) return 'expired';
      if (gasLevel >= thresholds.fresh) return 'near';
      return 'fresh';
    }

    // Get detailed gas analysis for a product
    function getGasAnalysis(product) {
      const thresholds = PRODUCT_GAS_THRESHOLDS[product.productType?.toLowerCase()] || 
                        PRODUCT_GAS_THRESHOLDS.default;
      const gasLevel = product.currentGasLevel || 0;
      
      let status = 'Fresh';
      let statusClass = 'fresh';
      let percentage = Math.round((gasLevel / thresholds.spoiled) * 100);
      
      // Debug: log the comparison
      console.log(`${product.name}: gas=${gasLevel}, fresh=${thresholds.fresh}, warning=${thresholds.warning}, spoiled=${thresholds.spoiled}`);
      
      // Correct logic: check boundaries precisely
      // Zone 1: gasLevel < fresh = FRESH
      // Zone 2: fresh <= gasLevel < warning = NEAR SPOILING  
      // Zone 3: gasLevel >= warning = SPOILED
      if (gasLevel >= thresholds.warning) {
        status = 'Spoiled';
        statusClass = 'expired';
        console.log(`  ‚Üí SPOILED (${gasLevel} >= ${thresholds.warning})`);
      } else if (gasLevel >= thresholds.fresh) {
        status = 'Near Spoiling';
        statusClass = 'near';
        console.log(`  ‚Üí NEAR SPOILING (${gasLevel} >= ${thresholds.fresh})`);
      } else {
        status = 'Fresh';
        statusClass = 'fresh';
        console.log(`  ‚Üí FRESH (${gasLevel} < ${thresholds.fresh})`);
      }
      
      return {
        status,
        statusClass,
        gasLevel: gasLevel.toFixed(2),
        percentage: Math.min(100, percentage),
        thresholds,
        gasType: thresholds.gasType
      };
    }

    // Filter and search products
    function getFilteredProducts() {
      return allProducts.filter(p => {
        const statusMatch = currentFilter === 'all' || getProductStatus(p) === currentFilter;
        const searchMatch = currentSearch === '' || 
          p.name.toLowerCase().includes(currentSearch.toLowerCase()) ||
          p.rfid.toLowerCase().includes(currentSearch.toLowerCase());
        return statusMatch && searchMatch;
      });
    }

    // Main render function
    function render() {
      const grid = document.getElementById('cardsGrid');
      const emptyState = document.getElementById('emptyState');
      const filteredProducts = getFilteredProducts();
      
      grid.innerHTML = '';

      // Show empty state if no products
      if (filteredProducts.length === 0) {
        emptyState.style.display = 'block';
      } else {
        emptyState.style.display = 'none';
      }

      let total = 0, expSoon = 0, expired = 0, totalQty = 0;

      // Calculate totals from ALL products for widgets
      allProducts.forEach(p => {
        const status = getProductStatus(p);
        if (status === 'expired') expired++;
        else if (status === 'near') expSoon++;
        total++;
        totalQty += (p.quantity || 0);
      });

      // Render filtered products
      filteredProducts.forEach((p, index) => {
        const analysis = getGasAnalysis(p);
        const gasLevel = analysis.gasLevel;
        const percentage = analysis.percentage;
        const thresholds = analysis.thresholds;

        // Status icon
        const statusIcon = analysis.statusClass === 'fresh' ? '‚úì' : (analysis.statusClass === 'near' ? '‚ö°' : '‚ö†Ô∏è');

        const card = document.createElement('div');
        card.className = 'card';
        card.style.animationDelay = `${index * 100}ms`;
        card.innerHTML = `
          <div class="thumb">
            <img 
              src="${p.image}" 
              alt="${p.name}" 
              onerror="this.onerror=null; this.src='data:image/svg+xml;utf8,${encodeURIComponent(getPlaceholderSVG(p.name))}';"
            />
          </div>
          <div class="meta">
            <div class="row">
              <div>
                <div class="product-name">${escapeHtml(p.name)}</div>
                <div class="rfid">üè∑ ${escapeHtml(p.rfid)}</div>
              </div>
              <div class="status ${analysis.statusClass}">
                <span>${statusIcon}</span>
                <span>${analysis.status}</span>
              </div>
            </div>

            <div class="row">
              <div class="gas-info">
                <div>
                  <strong>üî¨ Gas Type:</strong> ${escapeHtml(analysis.gasType)}
                </div>
                <div>
                  <strong>üìä Current Level:</strong> ${gasLevel} G.U.Z
                </div>
              </div>
            </div>

            <div class="gas-thresholds">
              <div class="threshold-info">
                <span class="threshold-label">Fresh</span>
                <span class="threshold-value">&lt; ${thresholds.fresh.toFixed(0)}</span>
              </div>
              <div class="threshold-info">
                <span class="threshold-label">Warning</span>
                <span class="threshold-value">${thresholds.fresh.toFixed(0)}-${thresholds.warning.toFixed(0)}</span>
              </div>
              <div class="threshold-info">
                <span class="threshold-label">Spoiled</span>
                <span class="threshold-value">&gt; ${thresholds.warning.toFixed(0)}</span>
              </div>
            </div>

            <div style="display: flex; align-items: center; gap: 12px; justify-content: space-between;">
              <div style="flex: 1;">
                <div class="progress" aria-hidden="true">
                  <i style="width:${percentage}%"></i>
                </div>
                <div class="progress-label">
                  <span>Gas Saturation</span>
                  <span style="font-weight: 700; color: var(--accent-primary);">${percentage}%</span>
                </div>
              </div>
              <div class="qty">√ó${p.quantity}</div>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });

      // Update summary widgets
      document.getElementById('totalProducts').textContent = total;
      document.getElementById('expiringSoon').textContent = expSoon;
      document.getElementById('expiredCount').textContent = expired;
      document.getElementById('totalQty').textContent = totalQty;
    }

    // Generate placeholder SVG
    function getPlaceholderSVG(name) {
      const short = (name || 'Product')
        .split(' ')
        .slice(0, 2)
        .map(w => w[0])
        .join('')
        .toUpperCase();
      const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='400' height='300'>
        <defs>
          <linearGradient id='grad' x1='0%' y1='0%' x2='100%' y2='100%'>
            <stop offset='0%' style='stop-color:#e0e7ff;stop-opacity:1' />
            <stop offset='100%' style='stop-color:#f3f4f8;stop-opacity:1' />
          </linearGradient>
        </defs>
        <rect width='100%' height='100%' fill='url(#grad)'/>
        <circle cx='200' cy='120' r='35' fill='#4f46e5' opacity='0.2'/>
        <text x='50%' y='45%' dominant-baseline='middle' text-anchor='middle' font-family='system-ui, -apple-system, sans-serif' font-size='64' font-weight='700' fill='#4f46e5' opacity='0.7'>${short}</text>
        <text x='50%' y='70%' dominant-baseline='middle' text-anchor='middle' font-family='system-ui, -apple-system, sans-serif' font-size='16' fill='#9ca3af' font-weight='500'>No Image</text>
      </svg>`;
      return svg;
    }

    // Initial render
    render();
    
    // Force re-render after 100ms to ensure analysis is correct
    setTimeout(() => {
      console.log('=== Force re-render to verify analysis ===');
      render();
    }, 100);

    // === SEARCH TOGGLE ===
    const searchToggleBtn = document.getElementById('searchToggleBtn');
    const searchContainer = document.getElementById('searchContainer');
    const searchInput = document.getElementById('searchInput');
    const searchClearBtn = document.getElementById('searchClearBtn');

    let isSearchOpen = false;

    function openSearch() {
      if (isSearchOpen) return;
      isSearchOpen = true;
      searchContainer.classList.add('is-open');
      document.body.classList.add('search-open');
      searchToggleBtn.setAttribute('aria-expanded', 'true');
      searchContainer.setAttribute('aria-hidden', 'false');
      searchInput.tabIndex = 0;
      searchClearBtn.tabIndex = 0;

      requestAnimationFrame(() => {
        searchInput.focus();
        searchInput.select();
      });
    }

    function closeSearch(clearValue = true) {
      if (!isSearchOpen) return;
      isSearchOpen = false;
      searchContainer.classList.remove('is-open');
      document.body.classList.remove('search-open');
      searchToggleBtn.setAttribute('aria-expanded', 'false');
      searchContainer.setAttribute('aria-hidden', 'true');
      searchInput.tabIndex = -1;
      searchClearBtn.tabIndex = -1;

      if (clearValue) {
        searchInput.value = '';
        currentSearch = '';
        render();
      }
    }

    searchToggleBtn.addEventListener('click', () => {
      if (isSearchOpen) {
        closeSearch(false);
      } else {
        openSearch();
      }
    });

    searchClearBtn.addEventListener('click', () => {
      closeSearch();
      searchToggleBtn.focus();
    });

    searchInput.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        e.stopPropagation();
        closeSearch();
        searchToggleBtn.focus();
      }
    });

    // === EVENT LISTENERS ===
    document.getElementById('searchInput').addEventListener('input', (e) => {
      currentSearch = e.target.value;
      render();
    });

    document.querySelectorAll('.tag').forEach(tag => {
      tag.addEventListener('click', () => {
        document.querySelectorAll('.tag').forEach(t => t.classList.remove('active'));
        tag.classList.add('active');
        currentFilter = tag.dataset.filter;
        render();
      });
    });

    // Set 'all' filter as initially active
    document.querySelector('[data-filter="all"]').classList.add('active');
  </script>
</body>
</html>
